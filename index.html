<script>
const EMOJIS = ['üçé','üçå','üçá','üçâ','üçí','ü•ù','üçç','üçë'];
let board = [...EMOJIS, ...EMOJIS];
board.sort(() => Math.random() - 0.5);

let firstChoice = null;
let secondChoice = null;
let lockBoard = false;
let score = 0;

const gameDiv = document.getElementById('game');
const scoreDiv = document.getElementById('score');
const winVideo = document.getElementById('winVideo');

function createBoard() {
  board.forEach((emoji, index) => {
    const card = document.createElement('div');
    card.classList.add('card');
    card.dataset.index = index;
    card.textContent = '‚ùì';
    card.addEventListener('click', handleClick);
    gameDiv.appendChild(card);
  });
}

function handleClick(e) {
  if (lockBoard) return;

  const card = e.currentTarget;
  const index = card.dataset.index;

  if (card.textContent !== '‚ùì' || card.classList.contains('matched')) return;

  card.textContent = board[index];

  if (!firstChoice) {
    firstChoice = card;
    return;
  }

  secondChoice = card;
  lockBoard = true;

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
  if (board[firstChoice.dataset.index] === board[secondChoice.dataset.index]) {
    firstChoice.classList.add('matched');
    secondChoice.classList.add('matched');
    score++;
    scoreDiv.textContent = `–û—á–∫–∏: ${score}`;
    resetChoices();

    if (score === 8) {
      winVideo.style.display = 'block';
      winVideo.play();
    }
  } else {
    // –ó–∞–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç—ã —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
    setTimeout(() => {
      firstChoice.textContent = '‚ùì';
      secondChoice.textContent = '‚ùì';
      resetChoices();
    }, 1000);
  }
}

function resetChoices() {
  firstChoice = null;
  secondChoice = null;
  lockBoard = false;
}

createBoard();
</script>
